<%- model_class = Article -%>
<div class="container">
  <div class="page-header">
    <h1><%=t '.title', :default => model_class.model_name.human.titleize %></h1>
  </div>

  <div class="row">
    <div class="panel col-lg-9">
      <h2><%= @article.title%></h2>    
      <strong><%= @article.description %></strong>
      <%- if current_user || @article.access_to_description == true %>
        <p><%= @article.full_text %></p>
      <%- else %>
        <h4>
          <%= link_to 'Sign in', new_user_session_path%>
           in for more info.
        </h4>
      <% end %>
      <h4 ><span id="rating"><%= @article.votes_for.size %></span> users liked this</h4>

      <%- if user_signed_in? && !(current_user.voted_for? @article) %>
        <%= link_to "Like", article_path, id: "like", remote: true, role: "button", class: "btn btn-default" %>
      <% end %>
      <div class="fb-like" data-share="true" data-width="450" data-show-faces="true"></div>
      <h4>
        <%= @visits %>
        visitors
      </h4>
      <h4>Posted by <%= link_to @article.user.name, @article.user %> at <%= @article.created_at %></h4>
    </div>
  </div>

  <%- if user_signed_in? && @article.user_id == current_user.id %>
  <%= link_to t('.back', :default => t("helpers.links.back")),
                articles_path, :class => 'btn btn-default'  %>
  <%= link_to t('.edit', :default => t("helpers.links.edit")),
                edit_article_path(@article), :class => 'btn btn-default' %>
  <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                article_path(@article),
                :method => 'delete',
                :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                :class => 'btn btn-danger' %>
  <% end %>
  <%- if current_user %>
    <%= render partial: 'comments/new', locals: { commentable: @article, comments_tree: @all_comments, comment: @comment } %>
  <% end %>    
  <%= render partial: 'comments/tree', locals: { all_comments: @all_comments } %>
</div>
      
