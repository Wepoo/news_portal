<%- model_class = Article -%>
<div class="container">
  <div class="page-header">
    <h1><%=t '.title', :default => model_class.model_name.human.titleize %></h1>
  </div>

  <div class="row">
    <h2><%= @article.title%></h2>
    <strong><%= @article.description %></strong>
    <p><%= @article.full_text %></p>
    <h4 id="rating"><%= @article.votes_for.size %> users liked this</h4>

    <%- if user_signed_in? && !(current_user.voted_for? @article) %>
      <%= link_to "Like", article_path, id: "like", remote: true, role: "button", class: "btn btn-default" %>
    <% end %>
    <div class="fb-like" data-share="true" data-width="450" data-show-faces="true"></div>
    <h4>Posted by <%= link_to @article.user.name, @article.user %> at <%= @article.created_at %></h4>
  </div>

  <%- if user_signed_in? && @article.user_id == current_user.id %>
  <%= link_to t('.back', :default => t("helpers.links.back")),
                articles_path, :class => 'btn btn-default'  %>
  <%= link_to t('.edit', :default => t("helpers.links.edit")),
                edit_article_path(@article), :class => 'btn btn-default' %>
  <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                article_path(@article),
                :method => 'delete',
                :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                :class => 'btn btn-danger' %>
  <% end %>

  <%= render partial: 'comments/tree', locals: { commentable: @article, comments_tree: @all_comments, comment: @comment } %>
  <div class="row">
    <div class="col-md-8">
      <div class="page-header">
        <h1><small class="pull-right">
          <%= @all_comments.size%>
        </small> Comments </h1>
      </div> 
      <div class="comments-list">
        <%- @all_comments.each do |comment| %>
          <%= render partial: 'comments/haml/comment', locals: { comment: comment } %>
        <% end %>
      </div> 
    </div> 
  </div> 
</div>
